## 추가한 TODO 화면에 그리기

- input에 할일을 입력하면 dispatch를 통해 type과 id를 지정해서 보낸다.

  ```js
  const addToDo = (text) => {
    store.dispatch({ type: ADD_TODO, text, id: Date.now() })
  }

  const onSubmit = (e) => {
    e.preventDefault()
    const toDo = input.value
    input.value = ""
    addToDo(toDo)
  }

  form.addEventListener("submit", onSubmit)
  ```

- subscribe를 통해 데이터 변화를 감지하면 화면에 그린다. (paintToDos)
  ```js
  const paintToDos = () => {
    const toDos = store.getState()
    ul.innerHTML = ""
    toDos.forEach((toDo) => {
      const li = document.createElement("li")
      li.id = toDo.id
      li.innerText = toDo.text
      ul.appendChild(li)
    })
  }
  store.subscribe(paintToDos)
  ```
- 전체 코드

  ```js
  import { createStore } from "redux"

  const form = document.querySelector("form")
  const input = document.querySelector("input")
  const ul = document.querySelector("ul")

  const ADD_TODO = "ADD_TODO"
  const DELETE_TODO = "DELETE_TODO"

  const reducer = (state = [], action) => {
    console.log(action)
    switch (action.type) {
      case ADD_TODO:
        return [...state, { text: action.text, id: action.id }]
      case DELETE_TODO: //Todo 지우는 로직
        return
      default:
        return state
    }
  }

  const store = createStore(reducer)

  const paintToDos = () => {
    const toDos = store.getState()
    ul.innerHTML = ""
    toDos.forEach((toDo) => {
      const li = document.createElement("li")
      li.id = toDo.id
      li.innerText = toDo.text
      ul.appendChild(li)
    })
  }
  store.subscribe(paintToDos)

  const addToDo = (text) => {
    store.dispatch({ type: ADD_TODO, text, id: Date.now() })
  }

  const onSubmit = (e) => {
    e.preventDefault()
    const toDo = input.value
    input.value = ""
    addToDo(toDo)
  }

  form.addEventListener("submit", onSubmit)
  ```

  <hr />

## 함수를 더 작게 쪼개기

- addToDo 함수를 더 작게 쪼개볼 수 있다. (dispatch만 하는 함수와 action을 return하는 함수로.)

  - action을 return해주는 함수 (일반적으로 reducer 함수 위에 위치한다.)

    ```js
    const addToDo = (text) => {
      return {
        type: ADD_TODO,
        text,
        id: Date.now(),
      }
    }

    const deleteToDo = (id) => {
      return {
        type: DELETE_TODO,
        id,
      }
    }
    ```

  - dispatch만 하는 함수
    ```js
    const dispatchAddToDo = (text) => {
    store.dispatch(addTodo(text))
    }

          const dispatchDeleteToDo = e => {
            const id = e.target.parentNode.id
            store.dispatch(deleteToDo(id))
          }

          ```

    <hr />

## state 수정(DELETE_TODO)
